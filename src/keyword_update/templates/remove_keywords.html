<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Remove Keywords</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2rem; }
    .keywords-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 0.5rem 1.5rem;
      list-style-type: none;
      padding: 0;
    }
    .keyword-item { margin-bottom: 0.5rem; }
    .submit-btn { margin-top: 1rem; padding: 0.5rem 1rem; cursor: pointer; }
    .select-all-box {
      border: 2px solid #ddd;
      background-color: #f9fafb;
      padding: 0.8rem 1rem;
      border-radius: 6px;
      margin-bottom: 1.5rem;
      font-weight: bold;
      display: inline-block;
    }
    .divider {
      border-bottom: 2px solid #e5e7eb;
      margin-bottom: 1.5rem;
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <h1 style="display: flex; align-items: center; gap: 10px;">
    <i class="fa-solid fa-circle-minus" style="color: #dc2626; font-size: 1.4em;"></i>
    Remove Keywords (check to remove)
    <a href="{{ url_for('show_routes') }}" 
       style="font-size: 0.6em; margin-left: 10px; background: #4f46e5; color: white; padding: 4px 10px; border-radius: 6px; text-decoration: none;">
       Routes URLs
    </a>
  </h1>

  <form method="post" action="{{ url_for(destination_url) }}">
    <!-- Select All Box -->
    <div class="select-all-box">
      <label>
        <input type="checkbox" id="selectAll"> Select All
      </label>
    </div>

    <div class="divider"></div>

    <ul class="keywords-grid">
      {% for word in keywords %}
        <li class="keyword-item">
          <label>
            <input type="checkbox" name="keyword{{ loop.index0 }}" value="{{ word }}">
            {{ word }}
          </label>
        </li>
      {% endfor %}
    </ul>

    <button type="submit" class="submit-btn">Remove Selected</button>
  </form>

  <div id="popup" style="
  display:none; position:fixed; inset:0;
  background:rgba(0,0,0,0.4);
  align-items:center; justify-content:center; z-index:9999;">
  <div style="
    background:white; padding:20px 30px; border-radius:10px;
    box-shadow:0 5px 20px rgba(0,0,0,0.2);
    min-width:300px; text-align:center;">
    <h2 style="margin-top:0; color:#dc2626;">Remove Keywords</h2>
    <p id="popup-text"></p>
    <button onclick="document.getElementById('popup').style.display='none'"
            style="background:#4f46e5; color:white; border:none; padding:6px 14px; border-radius:6px; cursor:pointer;">
      OK
    </button>
  </div>
  </div>


  <script>
    // Select/Deselect all checkboxes
    document.getElementById('selectAll').addEventListener('change', function() {
      const checkboxes = document.querySelectorAll('input[type="checkbox"][name^="keyword"]');
      checkboxes.forEach(cb => cb.checked = this.checked);
    });
  </script>

  {% with messages = get_flashed_messages(with_categories=true) %}
  {% for category, msg in messages %}
    {% if category == 'removed' %}
      <script>
        window.addEventListener('DOMContentLoaded', function () {
          const items = {{ msg['items']|tojson }};
          if (Array.isArray(items)) {
            const count = items.length;
            const text = count
              ? `Number of removed keywords: ${count}`
              : 'No keywords were removed.';

            // Show custom popup instead of alert
            document.getElementById('popup-text').textContent = text;
            document.getElementById('popup').style.display = 'flex';
          }
        });
      </script>
    {% endif %}
  {% endfor %}
  {% endwith %}

  <!--{% with messages = get_flashed_messages(with_categories=true) %}
    {% for category, msg in messages %}
      {% if category == 'removed' %}
        <script>
          window.addEventListener('DOMContentLoaded', function () {
	    const items = {{ msg['items']|tojson }};
	    if (Array.isArray(items)) {
	      const count = items.length;
	      const text = items.length
	        ? 'Number of removed keywords: ' + count
		: 'No keywords were removed.';
	      alert(text);
	    }
	  });
	</script>
      {% endif %}
    {% endfor %}
    {% endwith %} -->

</body>
</html>

